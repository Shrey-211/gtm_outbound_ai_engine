# GTM Outbound AI Engine (Scenario A)

Generates **personalized cold emails** for prospects using the unified contact database. Built for the PriceLabs GTM Engineer assignment — **Scenario A (Outbound Team)**.

Personalization is based on:

- **PMS** (e.g. Guesty, Hostaway)
- **Property type** (e.g. Vacation Rental, Boutique Hotel)
- **Region** (e.g. North America, Europe)
- **Company size** (derived from listing count when available)

Segmentation is rule-based; only the email copy is generated by AI (gpt-4o-mini) to control cost and reliability.

---

## Quick start

1. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

2. **Set your OpenAI API key**  
   Copy `.env.example` to `.env` and set:
   ```
   OPENAI_API_KEY=sk-your-key-here
   ```

3. **Add the contact CSV**  
   Place the database CSV as `data/database.csv` (or set `CSV_PATH` to its path). The sample is `pricelabs_gtm_database_sample.csv`; the repo uses `data/database.csv` by default.

4. **Run**
   ```bash
   python main.py
   ```
   Output is written to `generated_emails.csv` in the project root.

**Optional env vars:** `CSV_PATH` (input CSV), `OUTBOUND_LIMIT` (default `5`, number of prospects to process).

---

## Repo structure

| Path | Purpose |
|------|--------|
| `main.py` | Entrypoint: load CSV, filter prospects, segment, prompt, call AI, write CSV |
| `utils/segmentation.py` | Segment + company-size rules (PMS, MU_count, region, etc.) |
| `utils/prompt_builder.py` | Builds the LLM prompt (PMS, property type, region, company size) |
| `utils/ai_engine.py` | OpenAI call (gpt-4o-mini) |
| `data/database.csv` | Input contact data |
| `data/database_types.csv` | Field definitions (reference) |

---

## Docs (assignment Part 2C)

- **[PROMPT.md](PROMPT.md)** — Technical handoff for extending the project (e.g. with Claude Code or Codex): layout, segmentation, prompt, data layer, how to evolve.
- **[HOW-TO-USE.md](HOW-TO-USE.md)** — Guide for a non-technical marketer: setup, run, optional settings, troubleshooting.
- **[AI_JUSTIFICATION.md](AI_JUSTIFICATION.md)** — Part 2D: why AI for this use case, cost at scale, and what needs AI vs. rules/templates.

---

## Architecture

- **Segmentation** → deterministic rules (no AI).
- **Prompt building** → template + contact/segment fields (no AI).
- **Email body** → single AI step (gpt-4o-mini) for variety and personalization.

This keeps cost predictable and makes it easy to change segments or prompts without changing the model.
